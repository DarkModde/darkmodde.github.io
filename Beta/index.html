<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo de Uso - AdBlock Detection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .blocked {
            background: #fee;
            border: 2px solid #f00;
            color: #c00;
        }
        .not-blocked {
            background: #efe;
            border: 2px solid #0a0;
            color: #080;
        }
        .checking {
            background: #fef;
            border: 2px solid #fa0;
            color: #a80;
        }
        button {
            padding: 10px 20px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005a87;
        }
        .code {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            margin: 10px 0;
            border-left: 4px solid #007cba;
        }
    </style>
</head>
<body>
    <h1>Exemplo de Uso - AdBlock Detection Script</h1>
    
    <div id="status" class="status checking">
        üîç Verificando AdBlock...
    </div>

    <div class="code">
        <h3>Como usar o script:</h3>
        <pre>
// M√©todo 1: Carregar via CDN (recomendado)
const script = document.createElement('script');
script.src = 'https://raw.githubusercontent.com/DarkModde/Dark-Scripts/refs/heads/main/DarkSense.js';
document.head.appendChild(script);

// M√©todo 2: Usar callback ap√≥s detec√ß√£o
window.addEventListener('load', function() {
    if (window.AdBlockDetector) {
        window.AdBlockDetector.onDetection(function(isBlocked) {
            console.log('AdBlock detectado:', isBlocked);
            if (isBlocked) {
                alert('Por favor, desative seu AdBlock!');
            }
        });
    }
});

// M√©todo 3: Verifica√ß√£o direta (aguarde alguns segundos)
setTimeout(() => {
    if (window.AdBlockDetector) {
        console.log('Status:', window.AdBlockDetector.isBlocked);
    }
}, 3000);
        </pre>
    </div>

    <div>
        <h3>Testes:</h3>
        <button onclick="checkStatus()">Verificar Status Atual</button>
        <button onclick="testCallback()">Testar Callback</button>
        <button onclick="showDetails()">Mostrar Detalhes</button>
    </div>

    <div id="results"></div>

    <!-- Carregamento do script -->
    <script>
        // Simula o carregamento via CDN
        const script = document.createElement('script');
        script.src = 'data:text/javascript;charset=utf-8,' + encodeURIComponent(`
            // Aqui seria o conte√∫do do seu script hospedado
            // Por exemplo: https://cdn.jsdelivr.net/gh/DarkModde/Dark-Scripts/ProtectionScript.js
        `);
        document.head.appendChild(script);
    </script>

    <!-- Script local para demonstra√ß√£o -->
    <script>
        /**
         * AdBlock Detection Script - Vers√£o Inline para Demonstra√ß√£o
         * Em produ√ß√£o, use o arquivo externo!
         */
        (function() {
            'use strict';

            if (window.AdBlockDetector) return;

            class AdBlockDetector {
                constructor() {
                    this.isBlocked = false;
                    this.isChecking = true;
                    this.callbacks = [];
                    this.detectionMethods = 5;
                    this.completedMethods = 0;
                    this.blockedMethods = 0;
                    
                    this.init();
                }

                init() {
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', () => this.startDetection());
                    } else {
                        this.startDetection();
                    }
                }

                startDetection() {
                    this.detectByElements();
                    this.detectByScript();
                    this.detectByGoogleAds();
                    this.detectByCSS();
                    this.detectByBaitElement();
                    
                    setTimeout(() => {
                        this.finalizeDetection();
                    }, 3000);
                }

                detectByElements() {
                    const testSelectors = ['#adsbox', '#sponsor', '#banner', '#advertisement', '.ads'];
                    let blocked = 0;
                    let total = testSelectors.length;

                    testSelectors.forEach(selector => {
                        const element = document.querySelector(selector);
                        if (element) {
                            const style = window.getComputedStyle(element);
                            if (style.display === 'none' || element.offsetHeight === 0) {
                                blocked++;
                            }
                        }
                    });

                    if (blocked >= 2) {
                        this.methodDetected('elements');
                    } else {
                        this.methodCompleted('elements');
                    }
                }

                detectByScript() {
                    const testAd = document.createElement('div');
                    testAd.className = 'adsbox ad sponsor';
                    testAd.style.cssText = 'position:absolute;left:-999px;width:1px;height:1px;';
                    document.body.appendChild(testAd);
                    
                    setTimeout(() => {
                        const style = window.getComputedStyle(testAd);
                        if (style.display === 'none' || testAd.offsetHeight === 0) {
                            this.methodDetected('script');
                        } else {
                            this.methodCompleted('script');
                        }
                        document.body.removeChild(testAd);
                    }, 100);
                }

                detectByGoogleAds() {
                    setTimeout(() => {
                        if (typeof adsbygoogle === 'undefined') {
                            this.methodDetected('googleads');
                        } else {
                            this.methodCompleted('googleads');
                        }
                    }, 1000);
                }

                detectByCSS() {
                    const testDiv = document.createElement('div');
                    testDiv.className = 'advertisement';
                    testDiv.style.cssText = 'position:absolute;left:-999px;';
                    document.body.appendChild(testDiv);

                    setTimeout(() => {
                        const style = window.getComputedStyle(testDiv);
                        if (style.display === 'none') {
                            this.methodDetected('css');
                        } else {
                            this.methodCompleted('css');
                        }
                        document.body.removeChild(testDiv);
                    }, 200);
                }

                detectByBaitElement() {
                    const bait = document.createElement('div');
                    bait.className = 'pub_300x250 ads';
                    bait.style.cssText = 'width:1px;height:1px;position:absolute;left:-999px;';
                    document.body.appendChild(bait);

                    setTimeout(() => {
                        if (bait.offsetHeight === 0 || window.getComputedStyle(bait).display === 'none') {
                            this.methodDetected('bait');
                        } else {
                            this.methodCompleted('bait');
                        }
                        document.body.removeChild(bait);
                    }, 300);
                }

                methodDetected(method) {
                    this.blockedMethods++;
                    this.completedMethods++;
                    this.checkCompletion();
                }

                methodCompleted(method) {
                    this.completedMethods++;
                    this.checkCompletion();
                }

                checkCompletion() {
                    if (this.completedMethods >= this.detectionMethods) {
                        this.finalizeDetection();
                    }
                }

                finalizeDetection() {
                    if (this.isChecking) {
                        this.isChecking = false;
                        this.isBlocked = this.blockedMethods >= 2;
                        
                        // Atualiza o status na p√°gina
                        updatePageStatus(this.isBlocked);
                        
                        this.callbacks.forEach(callback => {
                            try {
                                callback(this.isBlocked);
                            } catch (e) {
                                console.error('Erro no callback:', e);
                            }
                        });
                    }
                }

                onDetection(callback) {
                    if (typeof callback === 'function') {
                        if (this.isChecking) {
                            this.callbacks.push(callback);
                        } else {
                            callback(this.isBlocked);
                        }
                    }
                }

                check(callback) {
                    this.onDetection(callback);
                    return this.isBlocked;
                }
            }

            window.AdBlockDetector = new AdBlockDetector();
            window.isAdBlocked = () => window.AdBlockDetector.isBlocked;
            window.checkAdBlock = (callback) => window.AdBlockDetector.onDetection(callback);
        })();

        // Fun√ß√µes da p√°gina de exemplo
        function updatePageStatus(isBlocked) {
            const statusDiv = document.getElementById('status');
            if (isBlocked) {
                statusDiv.className = 'status blocked';
                statusDiv.innerHTML = 'üö´ AdBlock DETECTADO';
            } else {
                statusDiv.className = 'status not-blocked';
                statusDiv.innerHTML = '‚úÖ AdBlock N√ÉO detectado';
            }
        }

        function checkStatus() {
            const status = window.AdBlockDetector ? window.AdBlockDetector.isBlocked : 'Script n√£o carregado';
            alert('Status atual: ' + (status ? 'BLOQUEADO' : 'N√ÉO BLOQUEADO'));
        }

        function testCallback() {
            if (window.AdBlockDetector) {
                window.AdBlockDetector.onDetection(function(isBlocked) {
                    alert('Callback executado! AdBlock: ' + (isBlocked ? 'SIM' : 'N√ÉO'));
                });
            } else {
                alert('Script ainda n√£o foi carregado!');
            }
        }

        function showDetails() {
            const resultsDiv = document.getElementById('results');
            if (window.AdBlockDetector) {
                resultsDiv.innerHTML = `
                    <div class="code">
                        <h4>Detalhes da Detec√ß√£o:</h4>
                        <p><strong>Status:</strong> ${window.AdBlockDetector.isBlocked ? 'BLOQUEADO' : 'N√ÉO BLOQUEADO'}</p>
                        <p><strong>Verifica√ß√£o conclu√≠da:</strong> ${!window.AdBlockDetector.isChecking ? 'SIM' : 'N√ÉO'}</p>
                        <p><strong>M√©todos que detectaram bloqueio:</strong> ${window.AdBlockDetector.blockedMethods || 0}</p>
                        <p><strong>Total de m√©todos executados:</strong> ${window.AdBlockDetector.completedMethods || 0}</p>
                        <p><strong>Resultado final:</strong> ${window.AdBlockDetector.isBlocked}</p>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = '<p>Script n√£o carregado ainda!</p>';
            }
        }
    </script>

    <!-- Elementos de teste que podem ser bloqueados -->
    <div id="adsbox" style="display:none;"></div>
    <div id="sponsor" style="display:none;"></div>
    <div id="advertisement" style="display:none;"></div>
    <div class="ads" style="display:none;"></div>
</body>
</html>
